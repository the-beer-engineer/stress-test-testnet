# `bitbox-cli`

## Command line tool for https://developer.bitcoin.com/bitbox.html

`bitbox-cli` is a utility for creating great [Bitcoin Cash](https://www.bitcoincash.org) applications. If can be used from the command line or from within client/server apps.

Extensive documentation available at:

* [General docs](https://developer.bitcoin.com)
* [BITBOX API](https://developer.bitcoin.com/bitbox.html)

Open Source / Creative Commons Listings

* [assert](https://www.npmjs.com/package/assert) - MIT
* [axios](https://github.com/axios/axios) - MIT
* [babel](https://babeljs.io/docs/setup/) - MIT
* [bchaddrjs](https://github.com/bitcoincashjs/bchaddrjs/blob/master/LICENSE) - mit
* [bigi](https://www.npmjs.com/package/bigi) - none
* [bip21](https://github.com/bigearth/bip21) - ISC
* [bip39](https://github.com/bitcoinjs/bip39/blob/master/LICENSE) - ISC
* [bitcoin-ops](https://github.com/bigearth/bitcoin-ops) - MIT
* [bitcoinjs-lib](https://github.com/bigearth/bitcoinjs-lib) - MIT
* [bitcoinjs-message](https://github.com/bitcoinjs/bitcoinjs-message) - MIT
* [bs58](https://www.npmjs.com/package/bs58) - MIT
* [buffer](https://www.npmjs.com/package/buffer) - MIT
* [chai](https://www.npmjs.com/package/chai) - MIT
* [chalk](https://www.npmjs.com/package/chalk) - MIT
* [clear](https://www.npmjs.com/package/clear) - none
* [commander](https://www.npmjs.com/package/commander) - MIT
* [cp-file](https://www.npmjs.com/package/cp-file) - MIT
* [ecurve](https://www.npmjs.com/package/ecurve) - MIT
* [figlet](https://www.npmjs.com/package/figlet) - MIT
* [flow-bin](https://www.npmjs.com/package/flow-bin) - MIT
* [git-clone](https://www.npmjs.com/package/git-clone) - ICS
* [ini](https://www.npmjs.com/package/ini) - ICS
* [mkdirp](https://www.npmjs.com/package/mkdirp) - MIT
* [mocha](https://www.npmjs.com/package/mocha) - MIT
* [node-cmd](https://www.npmjs.com/package/node-cmd) - DBAD
* [node-emoji](https://www.npmjs.com/package/node-emoji) - MIT
* [nyc](https://www.npmjs.com/package/nyc) - ICS
* [qrcode](https://www.npmjs.com/package/qrcode) - MIT
* [randombytes](https://www.npmjs.com/package/randombytes) - MIT
* [safe-buffer](https://www.npmjs.com/package/safe-buffer) - MIT
* [satoshi-bitcoin](https://www.npmjs.com/package/satoshi-bitcoin) - MIT
* [sinon](https://www.npmjs.com/package/sinon) - BSD-3-Clause
* [touch](https://www.npmjs.com/package/touch) - ISC

## Font awesome

[Cube icon](https://fontawesome.com/icons/cube?style=solid) available under [CC v4.0](https://creativecommons.org/licenses/by/4.0/)

```js
let mnemonic = 'slam tag city glass asthma mention rich leader snake prevent fatal trick typical gallery scare sort clip wolf strike float dwarf just clip mail';

let rootSeed = BITBOX.Mnemonic.toSeed(mnemonic);

let masterHDNode = BITBOX.HDNode.fromSeed(rootSeed, 'bitcoincash');

let account = BITBOX.HDNode.derivePath(masterHDNode, "m/44'/145'/0'");

let change = BITBOX.HDNode.derivePath(account, "2/0");
let change2 = BITBOX.HDNode.derivePath(account, "2/1");

let cashAddress = BITBOX.HDNode.toCashAddress(change);
let cashAddress2 = BITBOX.HDNode.toCashAddress(change2);
console.log(cashAddress2)

let transactionBuilder = new BITBOX.TransactionBuilder();

let originalAmount = 4859;

let vout = 0;
let txid = "b37e2cab6e0bbeaada82a01e60ce4b50f2468e563076a1b0c7308bdffdb8b665";

transactionBuilder.addInput(txid, vout);

let byteCount = BITBOX.BitcoinCash.getByteCount({ P2PKH: 1 }, { P2PKH: 1 });

let sendAmount = originalAmount - byteCount;

transactionBuilder.addOutput(cashAddress, sendAmount);

let keyPair = BITBOX.HDNode.toKeyPair(change);

let redeemScript;
transactionBuilder.sign(0, keyPair, redeemScript, transactionBuilder.hashTypes.SIGHASH_ALL, originalAmount);

let tx = transactionBuilder.build();
let hex = tx.toHex();
console.log('hex 1: ', hex)

// tx 2
let transactionBuilder2 = new BITBOX.TransactionBuilder();

let vout2 = 0;

transactionBuilder2.addInput("25268a7fc0356726fec2428a9e80604adccb957ee30cd9cde82086ae7d3950a4", vout2);

let sendAmount2 = 7547 - byteCount;
transactionBuilder2.addOutput(cashAddress2, sendAmount2);

let keyPair2 = BITBOX.HDNode.toKeyPair(change2);

transactionBuilder2.sign(0, keyPair2, redeemScript, transactionBuilder.hashTypes.SIGHASH_ALL, 7547);

let tx2 = transactionBuilder2.build();
let hex2 = tx2.toHex();
console.log('hex 2: ', hex2)

BITBOX.RawTransactions.sendRawTransaction( "020000000165b6b8fddf8b30c7b0a17630568e46f2504bce601ea082daaabe0b6eab2c7eb3000000006b483045022100ef2bf8e8089100202f08e50935a67e47925218c70351f06830edd918b2e249950220060fa78d1903981bbbae9169c1378bacfe4d3360fd2231a2e17d56f9db0b37ba41210313299e9ec7a9e62789094b850ab6f71df7c39af7c03568027c24d0bc9eda930dffffffff013b120000000000001976a914e11ed7fd6416d8f5c58a1cb3e1b0005c3cab092f88ac00000000").then((result) => {
  console.log(result);
}, (err) => { console.log(err); });
